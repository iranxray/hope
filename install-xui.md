# نصب ابزار Kafka 
برای یادگیری در مورد [تاریخچه شکل‌گیری و جزییات فنی پلتفرم Xray](https://github.com/iranxray/hope#%D9%BE%D9%84%D8%AA%D9%81%D8%B1%D9%85-xray) می‌توانید به این لینک رجوع کنید.

ما در این مقاله کوتاه آموزش می‌دهیم که چگونه می‌توانیم پلتفرم Xray را بر روی لینوکس نصب کنیم. اگر دسترسی به لینوکس ندارید، می توانید برای تهیه سیستم لینوکسی به [مستندات ما در این زمینه](https://github.com/iranxray/hope/blob/main/buy-server.md) رجوع کنید.

پیش از پرداختن به قسمت بعدی لازم است اشاره کنیم که Xray به خودی خود هیچگونه رابط کاربری (User Interface) ندارد و ما مجبور خواهیم بود که برای ساخت اکانت به صورت دستی فایل‌های تنظیمات را تغییر دهیم. از آنجا که انجام این کار برای کاربران تازه‌کار کمی سخت خواهد بود، ما به جای نصب مستقیم Xray، [اپلیکیشنی به نام Kafka](https://github.com/FranzKafkaYu/x-ui) را نصب خواهیم کرد که در کنار نصب Xray به ما یک رابط کاربری بسیار راحت برای مدیریت کاربران خواهد داد. به طور مثال، در عکس زیر، داشبورد X-UI به شما خواهد گفت که منابع سیستم چگونه در حال استفاده هستند.

![image](https://user-images.githubusercontent.com/118040490/201552920-ed6eca0d-b89c-47ee-a4b3-c65a0b36b90a.png)

⭐ دقت کنید که مطالب ما به شما کمک خواهد کرد که برای ۵۰ تا ۱۰۰ نفر سرویس عبور از فیلترینگ را فراهم کنید. هر چه تعداد کاربران شما پایین‌تر باشد، شانس هدف‌ قرارگرفتن server شما توسط GFW‌ پایین‌تر می‌آید.

# نکات امنیتی

* در صورت امکان، توصیه می‌کنیم از پنل وب شرکت برای SSH زدن به سرور استفاده کنید. برخی از شرکت‌ها مثل Vultr این امکان را فراهم کرده‌اند. اگر داخل ایران هستید، برقراری ارتباط مستقیم SSH به سرور ممکن است شانس شناسایی سرور شما را افزایش دهد.  اگر هم در خارج از کشور هستید، توصیه می‌کنیم پس از نصب Kafka پورت SSH را از طریق Firewall مسدود کنید.


# نصب اپلیکیشن X-UI
خب، رسیدیم به اصل ماجرا. 

## گام صفر 

مجددا تاکید کنیم که از اینجا به بعد پیش‌فرض ما این هست که شما [سیستم لینوکسی](https://github.com/iranxray/hope/blob/main/buy-server.md) خود را تهیه کرده، آدرس IP سرور خود را می‌دانید و [موفق شدید به آن SSH](https://github.com/iranxray/hope/blob/main/install-ssh-windows.md) کنید و الان صفحه cmd را باز دارید.


## گام اول
در صفحه cmd، ابتدا با دستور زیر، سطح اختیارات را بالا می‌بریم.

```bash
sudo -i
```
## گام دوم
با دستور زیر، فایل نصب X-UI را دانلود می‌کنیم.


```bash
wget https://raw.githubusercontent.com/FranzKafkaYu/x-ui/master/install_en.sh
```

## گام سوم
با دستور زیر، فایل نصب را اجرا می‌کنیم.


```bash
bash install.sh
```
## گام چهارم

۱. در جواب سوال `are you continue,if you type n will skip this at this time[y/n]` (آیا مایل به ادامه هستید؟) دکمه y را بزنید.

۲. در جواب سوال `please set up your username` (نام کاربری را مشخص کنید.) باید یک نام کاربری برای ورود به Kafka بسازید. می‌توانید از نامی مثل admin استفاده کنید.

۳. در جواب سوال `please set up your password` (رمز عبور را مشخص کنید.) باید رمزعبور را مشخص کنید. هر رمز عبور دلخواهی می‌توانید تعریف کنید. نام‌کاربری و رمزعبور را یادداشت کنید تا بعدا از آن برای ورود به Kafka استفاده کنیم.

۴. در جواب سوال `please set up the panel port` (پورت را مشخص کنید.) باید پورتی را مشخص کنیم که از آن برای وصل شدن به Kafka استفاده خواهیم کرد. پورت می‌تواند هر عددی بین 8000 تا 64000 باشد. مثلا می‌توانید پورت 34567 را انتخاب کنید.

با اجرای دستور `x-ui status`  نیز می‌توانید از در حال اجرا بودن X-UI مطمئن شوید.


## گام پنجم

در مرحله قبل شما یک port را انتخاب کردید اما به طور پیش‌فرض همه port ها بر روی server شما بسته هستند. لازم هست با مراجعه به [مقاله باز کردن port بر روی server](https://github.com/iranxray/hope/blob/main/open-server-port.md) رجوع کنید تا port ایی که در گام چهارم انتخاب کردید را باز کنید.

## گام هفتم

در صورتی که همه چی موفقیت آمیز پیش‌ رفته باشد، حالا باید بتوانیم که Kafka را بر روی مرورگر Chrome و Edge باز کنیم. 
.

مثلا اگر آدرس IP سرور ما 24.30.41.50 باشد و پورت 34567 در گام چهارم انتخاب کرده باشیم، آنگاه آدرس http://{IP}:{PORT} را در مرورگر می‌توانیم وارد کنیم تا وارد صفحه web بشویم.



```bash
http://24.30.41.50:34567
```

![image](https://user-images.githubusercontent.com/118040490/232973535-1b0759b9-6ea2-4bcb-a38a-1853ded1d505.png)

در این صفحه باید نام‌کاربری و رمزعبور را وارد کنید که در گام چهارم ساختید.

## گام هشتم

بعد از ورود موفق وارد صفحه داشبورد اصلی خواهید شد.
![image](https://user-images.githubusercontent.com/118040490/232973719-4f41cb11-32e1-4fe5-9218-b23af3ef795b.png)



## گام نهم

حالا نوبت ساخت کانفیگ برای اتصال کاربران‌تان رسیده است. در [مقاله ساخت کانفیگ](https://github.com/iranxray/hope/blob/main/create-configs.md) به شما نشان می‌دهیم که چگونه انواع ارتباطات VLESS و Trojan را برای کاربران خود تهیه کنید. برای این‌ کار همه چیز از صفحه Inbound Lists شروع می‌شود. پیشنهاد می‌کنیم ادامه را از [مقاله ساخت کانفیگ](https://github.com/iranxray/hope/blob/main/create-configs.md) دنبال کنید.

![image](https://user-images.githubusercontent.com/118040490/201568313-6e9e9eb5-4a09-4144-898c-6f4dc48ef44a.png)

# نکات امنیتی

۱. اگر داخل ایران هستید، ما توصیه می‌کنیم که برای وارد شدن به پنل Kafka حتما از فیلترشکن استفاده کنید تا شانس لو رفتن پنل کاسته شود. در غیر این صورت، احتمال دارد فیلترچی متوجه شود که بر روی سرور شما Kafka نصب شده است.

۲. بعد از نصب کانفیگ‌ها و در صورتی که همه چی خوب پیش رفت، ما توصیه می‌کنیم که به مستند Routing‌ مراجعه کنید تا ترافیک داخلی را بر روی سرور خود ببندید و به گوشی اجازه دهید بدون عبور از فیلترشکن از سایت‌های داخلی استفاده کند. استفاد از سایت‌های داخلی توسط فیلترشکن برای فیلترچی خط قرمز است.
